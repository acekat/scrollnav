function t(t,e){var n,i={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}function e(t,e){if("object"!=typeof t)return Promise.reject(new Error("First argument must be an object"));if("object"!=typeof(e=e||document.body))return Promise.reject(new Error("Second argument must be an object"));var n=e.getBoundingClientRect();return t.getBoundingClientRect().top-n.top}function n(t,i,s){void 0===s&&(s="scroll-nav");var r=[];return s+="__",t.forEach(function(t,o){var a=[],u=function(t,e){if("object"!=typeof t)return Promise.reject(new Error("First argument must be an object"));var n=t.id;if(!n){if("string"!=typeof e)return Promise.reject(new Error("Second argument must be a string"));t.id=n=e}return n}(t,s+(o+1));i.subSections&&t.matches(i.sections)&&(a=n(function(t,e,n){var i=[];for(t=t.nextElementSibling;t&&!t.matches(e);)!n||t.matches(n)?(i.push(t),t=t.nextElementSibling):t=t.nextElementSibling;return i}(t,i.sections,i.subSections),i,u));r.push({id:u,text:t.innerText||t.textContent,offsetTop:e(t),subSections:a})}),r}function i(t){var e=document.createElement("nav");return e.className="scroll-nav",e.innerHTML=function t(e,n){void 0===n&&(n=!1);var i="scroll-nav"+(n?"__sub-":"__"),s="\n    "+e.map(function(e){return'<li class="'+i+'item" data-sn-section="'+e.id+'">\n            <a class="'+i+'link" href="#'+e.id+'">'+e.text+"</a>\n            "+(e.subSections&&e.subSections.length?""+t(e.subSections,!0):"")+"\n          </li>"}).join("")+"\n  ";return'\n    <ol class="'+i+'list">\n      '+s+"\n    </ol>\n  "}(t),e}function s(t){return t.forEach(function(t){var n=document.getElementById(t.id);t.offsetTop=e(n),t.subSections.length&&(t.subSections=s(t.subSections))}),t}function r(t,e){var n=t.getAttribute("href");return"#"===n.charAt(0)&&(n=n.substr(1)),function t(e,n){var i;e.forEach(function(e){e.id===n&&(i=e),e.subSections&&void 0===i&&(i=t(e.subSections,n))});return i}(e,n).offsetTop}var o,a,u,c=function(t){return function(e){return Math.pow(e,t)}},l=function(t){return function(e){return 1-Math.abs(Math.pow(e-1,t))}},f=function(t){return function(e){return e<.5?c(t)(2*e)/2:l(t)(2*e-1)/2+.5}},d={linear:f(1),easeInQuad:c(2),easeOutQuad:l(2),easeInOutQuad:f(2),easeInCubic:c(3),easeOutCubic:l(3),easeInOutCubic:f(3),easeInQuart:c(4),easeOutQuart:l(4),easeInOutQuart:f(4),easeInQuint:c(5),easeOutQuint:l(5),easeInOutQuint:f(5)};function g(t,e){return new Promise(function(n,i){if("number"!=typeof t)return i(new Error("First argument must be a number"));if("string"!=typeof(e=e||"linear"))return i(new Error("Second argument must be a string"));var s,r=window.pageYOffset,o=t-r,a=function(t){var e=Math.abs(t/2);return Math.min(Math.max(e,250),1200)}(o),u=20,c=0;!function t(){s=d[e]((c+=u)/a),window.scroll(0,s*o+r),c<a?setTimeout(t,u):n(window.pageYOffset)}()})}function h(t){function e(){var e=window.scrollY||window.pageYOffset||document.body.scrollTop,n=e+.4*window.innerHeight,i=function t(e,n,i){var s,r;e.forEach(function(t){t.offsetTop>i?!s&&t.offsetTop<n&&(s=t):s=t}),s&&s.subSections.length&&(r=t(s.subSections,n,i))&&(s=r);return s}(t.data,e,n);return function(t,e){var n=e.querySelector("[data-sn-active]");if(t){var i=e.querySelector('[data-sn-section="'+t.id+'"]');i&&i!==n&&(n&&(n.classList.remove("scroll-nav__item--active"),n.removeAttribute("data-sn-active")),i.classList.add("scroll-nav__item--active"),i.setAttribute("data-sn-active",!0))}else n&&(n.classList.remove("scroll-nav__item--active"),n.removeAttribute("data-sn-active"))}(i,t.nav),i}return window.addEventListener("scroll",e),e}function v(t){return t instanceof Element}export default{init:function(e,c){if(this.settings=t({sections:"h2",insertTarget:e,insertLocation:"before",easingStyle:"easeOutQuad",updateHistory:!0},c),v(e))if(!this.settings.insertTarget||v(this.settings.insertTarget))if(["append","prepend","after","before"].includes(this.settings.insertLocation)){var l,f,d,b,p=e.querySelectorAll(this.settings.sections);if(p.length)return this.data=n(p,this.settings),this.nav=i(this.data),f=(l=this).settings.insertTarget,"append"===(d=l.settings.insertLocation)?f.appendChild(l.nav):"prepend"===d?f.insertBefore(l.nav,f.firstChild):"before"===d?f.parentNode.insertBefore(l.nav,f):"after"===d&&f.parentNode.insertBefore(l.nav,f.nextSibling),o=function(t){var e=t.settings;function n(n){n.preventDefault();var i=.39*window.innerHeight;return g(r(n.target,t.data)-i,e.easingStyle).then(function(){e.updateHistory&&history.replaceState({},"",n.target.getAttribute("href")),e.onScroll&&e.onScroll()})}return t.nav.querySelectorAll("a").forEach(function(t){t.addEventListener("click",n)}),n}(this),a=h(this),u=function(t){function e(){t.data=s(t.data)}return window.addEventListener("resize",e),e}(this),this.settings.debug&&((b=document.createElement("div")).className="snDebugger",b.setAttribute("style","\n      position: fixed;\n      top: 40%;\n      height: 0px;\n      border-bottom:5px solid red;\n      border-top: 5px solid blue;\n      width: 100%;\n      opacity: .5;\n      pointer-events: none;\n    "),document.body.appendChild(b)),this.settings.onInit?this.settings.onInit():void 0;this.settings.debug&&console.error('\n        scrollnav build failed, could not find any "'+this.settings.sections+'"\n        elements inside of "'+e+'"\n      ')}else this.settings.debug&&console.error('\n        scrollnav build failed, options.insertLocation "'+this.settings.insertLocation+'" is not a valid option\n      ');else this.settings.debug&&console.error('\n        scrollnav build failed, options.insertTarget "'+e+'" is not an HTML Element\n      ');else this.settings.debug&&console.error('\n        scrollnav build failed, content argument "'+e+'" is not an HTML Element\n      ')},destroy:function(e){if(this.settings=t(this.settings,e),function(t,e){t.querySelectorAll("a").forEach(function(t){t.removeEventListener("click",e)})}(this.nav,o),function(t){window.removeEventListener("scroll",t)}(a),function(t){window.removeEventListener("resize",t)}(u),this.nav.remove(),this.settings.onDestroy)return this.settings.onDestroy()},updatePositions:function(e){if(this.settings=t(this.settings,e),this.data=s(this.data),this.settings.onUpdatePositions)return this.settings.onUpdatePositions()}};
//# sourceMappingURL=scrollnav.min.mjs.map
